## 💾 파티셔닝 (Partitioning)

파티셔닝 : 데이터를 다수의 엔티티로 쪼개는 행위 <br>
즉, 큰 테이블을 관리하기 쉽도록 파티션이라는 작은 단위로 물리적 분할

![image](https://github.com/Woori-FISA-CS-Study/CS-Study/assets/65431814/16647b2a-2003-45e5-8be1-b3e9c96b8632)

<br>

### 🚩 등장 배경
- 데이터베이스에 저장하는 데이터 및 테이블의 규모가 커지면서 (VLDB, Very Large DBMS) 데이터베이스 용량의 한계와 성능 저하가 발생

- 이를 해결하기 위해 테이블을 '파티션(partition)'이라는 작은 단위로 나누어 관리하는 파티셔닝 (Partitioning) 기법이 등장

<br>

### 😃 파티셔닝의 장점
1. 성능 향상 : 파티셔닝은 데이터를 분할하여 작은 단위로 관리하므로 특정 데이터에 접근할 때 필요한 시간과 리소스를 줄일 수 있다.<br>
예를 들어, 특정 기간의 데이터만 필요한 경우 해당 파티션에만 접근하면 되기 때문에 데이터베이스의 전체 스캔을 피할 수 있다.

2. 효율성 : 데이터베이스의 성능과 용량을 효율적으로 관리할 수 있게 한다.<br>
예를 들어, 데이터베이스에 새로운 데이터가 추가될 때 새로운 파티션에만 데이터를 삽입하면 되므로 전체 데이터베이스를 재구성할 필요가 없다.

3. 관리 용이 : 파티셔닝은 데이터베이스의 관리를 용이하게 만든다. <br>
특정 파티션의 데이터를 백업하거나 복원하는 것이 전체 데이터베이스를 대상으로 하는 것보다 빠르고 간편하기 때문이다. <br>
또한 파티션 단위로 인덱스를 생성하거나 통계 정보를 수집할 수 있어 데이터의 검색과 분석을 최적화할 수 있다.

<br>

### 😫 파티셔닝의 단점

1. 복잡성 : 파티셔닝은 데이터베이스의 구조를 복잡하게 만들 수 있다. <br> 여러 파티션을 관리하고 쿼리를 실행하기 위해 추가적인 작업이 필요할 수 있기 때문이다.

2. 애플리케이션 호환성 : 파티셔닝은 데이터베이스의 논리적인 구조를 변경할 수 있기 때문에 기존의 애플리케이션과의 호환성을 고려해야 한다. <br> 파티셔닝된 테이블을 사용하는 애플리케이션은 파티션 스키마에 맞게 수정되어야 할 수도 있다.

3. 파티션 키 선택 : 파티션 키의 선택은 파티셔닝의 효과를 크게 좌우한다. <br> 적절한 키를 선택하지 않으면 데이터의 불균형이 발생하거나 파티션 간의 작업 부하가 고르게 분산되지 않을 수 있다. 

<br>

### 📚 파티셔닝 유형

#### 1. 수평(horizontal) 파티셔닝
   
![image](https://github.com/Woori-FISA-CS-Study/CS-Study/assets/65431814/8a5232f7-e375-41d5-83a2-e7a79975dd8b)

- 데이터를 수직으로 분할하는 기법
- 테이블의 열(Column)을 기준으로 데이터를 분할한다.
- 분할된 열은 서로 다른 물리적 장소에 보관되고 독립적으로 관리될 수 있다.
- 주로 대규모 데이터베이스의 성능 향상과 유지보수 용이성을 위해 사용된다.
- ex) 자주 사용되지 않는 열이나 대용량 데이터를 별도의 파티션을 분리해 성능을 향상시킬 수 있다.

<br>

#### 2. 수직(vertical) 파티셔닝
   
![image](https://github.com/Woori-FISA-CS-Study/CS-Study/assets/65431814/936b1cfe-04f5-4031-ac15-61a062f20264)

- 데이터를 수평으로 분할하는 기법
- 테이블의 행(Row)을 기준으로 데이터를 분할한다.
- 분할된 행은 동일한 스키마를 가지며 논리적으로는 하나의 테이블이지만 물리적으로는 여러 개의 파티션으로 분산 저장된다.
- 주로 대량의 데이터를 처리하거나 고가용성 및 확장성을 위해 사용된다.
- ex) 지역별로 고객 데이터를 분할해 데이터 처리 성능을 향상시킬 수 있다.

<br>

### 🎯 파티셔닝 분할 기준
![image](https://github.com/Woori-FISA-CS-Study/CS-Study/assets/65431814/1a84dc59-3176-4304-be76-889fe9a69970)

- 범위 분할(Range Partitioning) : 데이터를 값의 범위에 따라 나누는 방식 <br> ex) 주문 날짜 기준으로 월별 파티션 구성

- 리스트 분할(List Partitioning) : 지정된 열의 값 목록에 따라 나누는 방식 <br> ex) 지역별 파티션 구성

- 해시 분할(Hash Partitioning) : 데이터를 특정 컬럼의 해시 값에 따라 균등하게 나누는 방식 <br> ex) 고객 데이터를 고객 ID의 해시 값에 따라 파티션 구성

- 복합 분할(Composite Partitioning) :
여러 개의 분할 기준을 조합하여 파티션을 구성하는 방식 <br> ex)주문 날짜와 지역을 고려해 파티션 구성
<br>

### 💻 파티셔닝 설계 및 구현 단계

1. 요구 사항 및 데이터 분석 : 먼저 시스템의 요구 사항을 분석해야 한다. <br> 데이터의 특성, 접근 패턴, 성능 목표 등을 고려하여 파티셔닝 전략을 결정한다.

2. 파티션 키 선택 : 파티션 키는 데이터를 어떻게 분산할지 결정하는 중요한 요소로, 데이터의 특성과 접근 패턴을 고려하여 선택해야 한다. <br> 자주 사용되는 쿼리의 조건이나 데이터의 고유한 식별자를 파티션 키로 선택하는 경우가 많다.
3. 파티션 유형 선택 : 데이터의 특성과 분산 방식에 따라 파티션 유형을 선택한다.
4. 파티션 수 결정 : 파티션 수는 데이터베이스 시스템의 성능과 확장성에 영향을 미치는 중요한 요소이다. <br> 파티션 수는 데이터의 크기, 예상된 성장률, 하드웨어 리소스 등을 고려하여 결정해야 한다.<br> 적절한 파티션 수를 선택해야 작업 부하를 고르게 분산시킬 수 있다.
5. 파티션 구현 :  데이터베이스 시스템에 따라 파티션 구현 방법이 다를 수 있다. <br> 일반적으로는 데이터베이스의 테이블 생성 시 파티션 관련 옵션을 설정하여 파티션을 생성한다.

<br>

### ✨ 파티셔닝의 효과

<br>

### ❗ 파티셔닝 주의사항
