# π΅ λ°λ³µμ ν¨ν„΄(Iterator Pattern)

λ°λ³µμ ν¨ν„΄(Iterator Pattern) : μ»¬λ ‰μ…μ μ”μ†λ¥Ό μνν•λ” λ°©λ²•μ„ μ κ³µν•λ” ν¨ν„΄

μ»¬λ ‰μ… : κ°μ²΄λ“¤μ„ κ·Έλ£ΉμΌλ΅ λ¬¶μ€ μΌλ ¨μ λ°μ΄ν„° μ§‘ν•© ex. λ¦¬μ¤νΈ, νΈλ¦¬, κ·Έλν”„ λ“±

λ°°μ—΄μ΄λ‚ λ¦¬μ¤νΈμ κ²½μ° μμ„κ°€ μ—°μ†μ μ΄κΈ° λ•λ¬Έμ— forλ¬Έμ„ ν†µν•΄ μνν•  μ μμ§€λ§ νΈλ¦¬ κ°™μ€ μ»¬λ ‰μ…μ€ λ°μ΄ν„° μ €μ¥ μμ„κ°€ μ •ν•΄μ§€μ§€ μ•κΈ° λ•λ¬Έμ— μ–΄λ–¤ μ”μ†λ¥Ό μ–΄λ–¤ κΈ°μ¤€μΌλ΅ μ ‘κ·Όν•΄μ•Ό ν•  μ§€ μ• λ§¤ν•λ‹¤.

<br>

![image](https://github.com/Woori-FISA-CS-Study/CS-Study/assets/65431814/e6f63e06-1acc-4b55-b22c-b26ac9008e7d)

λ”°λΌμ„ μ»¬λ ‰μ…μ„ μνν•λ” μ•κ³ λ¦¬μ¦ μ „λµμ„ μ •μν•λ” κ²ƒμ΄ λ°λ³µμ ν¨ν„΄μ΄λ‹¤.

<br>
<br>

## β›“ λ°λ³µμ ν¨ν„΄ κµ¬μ„± μ”μ†

λ°λ³µμ ν¨ν„΄μ€ ν¬κ² 'Aggregate'μ™€ 'Iterator' λ‘ κ°€μ§€ μ£Όμ” κµ¬μ„± μ”μ†λ΅ μ΄λ£¨μ–΄μ Έ μλ‹¤.

- Aggregate (μΈν„°νμ΄μ¤) : μ»¬λ ‰μ…μ„ λ‚νƒ€λ‚΄λ” μΈν„°νμ΄μ¤

  - iterator() : ConcreateIterator κ°μ²΄λ¥Ό λ§λ“λ” ν©ν† λ¦¬ λ©”μ„λ“

- ConcreateAggregate (ν΄λμ¤) : μ—¬λ¬ μ”μ†λ“¤μ΄ μ΄λ£¨μ–΄μ Έ μλ” λ°μ΄ν„° μ§‘ν•©μ²΄

- Iterator (μΈν„°νμ΄μ¤) : μ»¬λ ‰μ… μ”μ†λ¥Ό μν™ν•λ” μΈν„°νμ΄μ¤

  - hasNext() : μνν•  λ‹¤μ μ”μ†κ°€ μλ”μ§€ ν™•μΈ (true / false)
  - next() : μ”μ†λ¥Ό λ°ν™ν•κ³  λ‹¤μ μ”μ†λ¥Ό λ°ν™ν•  μ¤€λΉ„λ¥Ό ν•κΈ° μ„ν•΄ μ»¤μ„λ¥Ό μ΄λ™

- ConcreateIterator (ν΄λμ¤) : λ°λ³µμ κ°μ²΄

  - ConcreateAggregateκ°€ κµ¬ν„ν• λ©”μ„λ“λ΅λ¶€ν„° μƒμ„±λλ©° ConcreateAggregate μ μ»¬λ ‰μ…μ„ μ°Έμ΅°ν•μ—¬ μνν•λ‹¤.
  - μ–΄λ–¤ μ „λµμΌλ΅ μνν• μ§€μ— λ€ν• λ΅μ§μ„ κµ¬μ²΄ν™”ν•λ‹¤.

<br>
<br>

## β™ λ°λ³µμ ν¨ν„΄ κµ¬ν„

λ¨Όμ € λ°λ³µμ ν¨ν„΄μ„ μ μ©ν•μ§€ μ•κ³  μ»¬λ ‰μ…μ μ”μ†λ¥Ό μνν•λ” μμ‹ μ½”λ“λ” λ‹¤μκ³Ό κ°™λ‹¤. <br>
λ°λ³µμ ν¨ν„΄μ„ μ μ©ν•μ§€ μ•μ€ κ²½μ°, μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬μ΅°μ— μ§μ ‘ μ ‘κ·Όν•΄μ•Ό ν•λ‹¤.

```java
// μ»¬λ ‰μ… ν΄λμ¤
class ConcreteAggregate {
    private Object[] items;

    public ConcreteAggregate(Object[] items) {
        this.items = items;
    }

    public Object getItem(int index) {
        return items[index];
    }

    public int getSize() {
        return items.length;
    }
}

// ν΄λΌμ΄μ–ΈνΈ μ½”λ“
public class Client {
    public static void main(String[] args) {
        Object[] items = {"item1", "item2", "item3"};
        ConcreteAggregate aggregate = new ConcreteAggregate(items);

        for(int i = 0; i < aggregate.getSize(); i++) {
            System.out.println(aggregate.getItem(i));
        }
    }
}
```

λ°λ³µμ ν¨ν„΄μ΄ μ μ©λμ§€ μ•μ€ μƒνƒμ—μ„λ” ConcreteAggregate ν΄λμ¤κ°€ getItemκ³Ό getSize λ©”μ†λ“λ¥Ό μ κ³µν•μ—¬, ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ—μ„ μ΄ λ©”μ†λ“λ¥Ό μ‚¬μ©ν•΄ μ»¬λ ‰μ…μ μ”μ†μ— μ§μ ‘ μ ‘κ·Όν•κ³  μλ‹¤. <br>
λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬μ΅°, μ¦‰ μ”μ†κ°€ λ°°μ—΄μ— μ €μ¥λμ–΄ μμμ„ μ•μ•„μ•Ό ν•λ‹¤. <br>
μ΄λ” ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬μ΅°μ— μμ΅΄ν•κ² λ§λ“ λ‹¤. <br>
λ§μ•½ μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬μ΅°κ°€ λ³€κ²½λλ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½λμ–΄μ•Ό ν•λ” κ²ƒμ΄λ‹¤.

<br>

ν•μ§€λ§ λ°λ³µμ ν¨ν„΄μ„ μ‚¬μ©ν•λ©΄ μ΄λ¬ν• λ‚΄λ¶€ κµ¬μ΅°μ— λ€ν• μ ‘κ·Όμ„ μ¶”μƒν™”ν•  μ μμΌλ―€λ΅ ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬μ΅°μ— μμ΅΄ν•μ§€ μ•κ² λλ‹¤. <br>
λ°λ³µμ ν¨ν„΄μ„ μ μ©ν•λ©΄ λ‹¤μκ³Ό κ°™λ‹¤.

```java
// Iterator μΈν„°νμ΄μ¤
interface Iterator {
    boolean hasNext();
    Object next();
}

// ConcreteIterator ν΄λμ¤
class ConcreteIterator implements Iterator {
    private Object[] items;
    private int position = 0;

    public ConcreteIterator(Object[] items) {
        this.items = items;
    }

    public Object next() {
        return items[position++];
    }

    public boolean hasNext() {
        return position < items.length;
    }
}

// Aggregate μΈν„°νμ΄μ¤
interface Aggregate {
    Iterator createIterator();
}

// ConcreteAggregate ν΄λμ¤
class ConcreteAggregate implements Aggregate {
    private Object[] items;

    public ConcreteAggregate(Object[] items) {
        this.items = items;
    }

    public Iterator createIterator() {
        return new ConcreteIterator(items);
    }
}

// ν΄λΌμ΄μ–ΈνΈ μ½”λ“
public class Client {
    public static void main(String[] args) {
        Object[] items = {"item1", "item2", "item3"};
        Aggregate aggregate = new ConcreteAggregate(items);
        Iterator iterator = aggregate.createIterator();

        while(iterator.hasNext()) {
            System.out.println(iterator.next());
        }
    }
}
```

ν΄λΌμ΄μ–ΈνΈλ” Iterator μΈν„°νμ΄μ¤μ next()μ™€ hasNext() λ©”μ†λ“λ§μ„ μ‚¬μ©ν•μ—¬ μ»¬λ ‰μ…μ μ”μ†λ¥Ό μνν•λ―€λ΅ μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬μ΅°κ°€ μ–΄λ–»κ² λ³€κ²½λλ“  ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•  ν•„μ”κ°€ μ—†λ‹¤.

<br>
<br>

## π€ λ°λ³µμ ν¨ν„΄μ μ¥μ 

- μΌκ΄€λ μ΄ν„°λ μ΄ν„° μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•΄ μ—¬λ¬ ν•νƒμ μ»¬λ ‰μ…μ— λ€ν•΄ λ™μΌν• μν λ°©λ²•μ„ μ κ³µν•λ‹¤.
- μ»¬λ ‰μ…μ λ‚΄λ¶€ κµ¬μ΅° λ° μν λ°©μ‹μ„ μ•μ§€ μ•μ•„λ„ λλ‹¤.
- μ§‘ν•©μ²΄μ κµ¬ν„κ³Ό μ ‘κ·Όν•λ” μ²λ¦¬ λ¶€λ¶„μ„ λ°λ³µμ κ°μ²΄λ΅ λ¶„λ¦¬ν•΄ κ²°ν•©λ„λ¥Ό μ¤„μΌ μ μλ‹¤.
  (Clientμ—μ„ iteratorλ΅ μ ‘κ·Όν•κΈ° λ•λ¬Έμ— ConcreteAggregate λ‚΄μ— μμ • μ‚¬ν•­μ΄ μƒκ²¨λ„ iteratorμ— λ¬Έμ κ°€ μ—†λ‹¤λ©΄ λ¬Έμ κ°€ λ°μƒν•μ§€ μ•λ”λ‹¤.)
- μν μ•κ³ λ¦¬μ¦μ„ λ³„λ„μ λ°λ³µμ κ°μ²΄μ— μ¶”μ¶ν•μ—¬ κ° ν΄λμ¤μ μ±…μ„μ„ λ¶„λ¦¬ν•μ—¬ λ‹¨μΌ μ±…μ„ μ›μΉ™(SRP)λ¥Ό μ¤€μν•λ‹¤.
- λ°μ΄ν„° μ €μ¥ μ»¬λ ‰μ… μΆ…λ¥κ°€ λ³€κ²½λμ–΄λ„ ν΄λΌμ΄μ–ΈνΈ κµ¬ν„ μ½”λ“λ” μ†μƒλμ§€ μ•μ•„ μμ •μ—λ” λ‹«ν€ μμ–΄ κ°λ°© νμ‡„ μ›μΉ™(OCP)λ¥Ό μ¤€μν•λ‹¤.

<br>
<br>

## π« λ°λ³µμ ν¨ν„΄μ λ‹¨μ 

- ν΄λμ¤κ°€ λμ–΄λ‚κ³  λ³µμ΅λ„κ°€ μ¦κ°€ν•λ‹¤.
  (λ§μΌ μ•±μ΄ κ°„λ‹¨ν• μ»¬λ ‰μ…μ—μ„λ§ μ‘λ™ν•λ” κ²½μ° ν¨ν„΄μ„ μ μ©ν•λ” κ²ƒμ€ λ³µμ΅λ„λ§ μ¦κ°€ν•  μ μμΌλ―€λ΅ μ΄ν„°λ μ΄ν„° κ°μ²΄λ¥Ό λ§λ“λ” κ²ƒμ΄ μ μ©ν• μƒν™©μΈμ§€ νλ‹¨ν•  ν•„μ”κ°€ μλ‹¤.)

<br>
<br>

## π•’ λ°λ³µμ ν¨ν„΄ μ‚¬μ© μ‹κΈ°

- μ»¬λ ‰μ…μ— μƒκ΄€μ—†μ΄ κ°μ²΄ μ ‘κ·Ό μν λ°©μ‹μ„ ν†µμΌν•κ³ μ ν•  λ•
- μ»¬λ ‰μ…μ„ μνν•λ” λ‹¤μ–‘ν• λ°©λ²•μ„ μ§€μ›ν•κ³  μ‹¶μ„ λ•
- μ»¬λ ‰μ…μ λ³µμ΅ν• λ‚΄λ¶€ κµ¬μ΅°λ¥Ό ν΄λΌμ΄μ–ΈνΈλ΅ λ¶€ν„° μ¨κΈ°κ³  μ‹¶μ„ λ•(νΈμ + λ³΄μ•)
- λ°μ΄ν„° μ €μ¥ μ»¬λ ‰μ… μΆ…λ¥κ°€ λ³€κ²½Β κ°€λ¥μ„±μ΄Β μμ„Β λ•

<br>
<br>

## π― λ°λ³µμ ν¨ν„΄μ΄ μ μ©λ μμ‹

<b>1. java.util.Iterator </b>

- hasNext() : μνν•  μ”μ†κ°€ μλ”μ§€ ν™•μΈ
- next() : ν„μ¬ μ»¤μ„μ μ”μ†λ¥Ό μ¶λ ¥ν•κ³  λ‹¤μμΌλ΅ μ»¤μ„λ¥Ό μ΄λ™
- remove()Β : Iteratorμ—μ„Β next()λ΅ λ°›μ•λ ν•΄λ‹Ή μ—λ¦¬λ¨ΌνΈλ¥Ό μ‚­μ .

  λ¨λ“  μ΄ν„°λ μ΄ν„°μ—μ„ λ‹¤ μ§€μ›ν•λ” κ²ƒμ€ μ•„λ‹λ‹¤. UnsupportedOperationException()μ„ λμ§€λ” κ²½μ°κ°€ λ§λ‹¤.
  λ³΄ν†µ μ΄ κΈ°λ¥μ€ λ™μ‹μ— λ‹¤λ°μ μΌλ΅ κ°™μ€ λ…λ Ήμ„ μν–‰ν•΄λ„ μ•μ „ν• μ»¬λ ‰μ…μ—μ„ μ κ³µν•λ‹¤.

- forEachRemaining() : ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μν μ½”λ“λ¥Ό μ‹¬ν”ν™” ν•΄μ¤€λ‹¤.

```java
public static void main(String[] args) {
    Set<Integer> aggregate = new TreeSet<>(List.of(1,2,3,4,5));

    // hasNext(), next(), remove()
    Iterator<Integer> itr = aggregate.iterator();
    while(itr.hasNext()) {
        System.out.printf("%d μ‚­μ ", itr.next());
        itr.remove();
    }

    System.out.println(aggregate); // []
}
```

<br>

<b>2. Springμ CompositeIterator </b>

- κΈ°μ΅΄μ Interatorμ— add κΈ°λ¥λ§ μ¶”κ°€
- add() : μ—¬λ¬ Iteratorλ“¤μ„ μ΅°ν•©(Composite)ν•΄μ„ μ‚¬μ©ν•  μ μλ‹¤.

```java
public class IteratorInSpring {

    public static void main(String[] args) {
        CompositeIterator iterator;
    }
}
```
