## ğŸ–‡ï¸ ì±…ì„ ì—°ì‡„ íŒ¨í„´(Chain Of Responsibility Pattern, COR)

í´ë¼ì´ì–´íŠ¸ì˜ ìš”ì²­ì— ëŒ€í•œ ì„¸ì„¸í•œ ì²˜ë¦¬ë¥¼ í•˜ë‚˜ì˜ ê°ì²´ê°€ ëª½ë•… í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ì—¬ëŸ¬ê°œì˜ **ì²˜ë¦¬ ê°ì²´**ë“¤ë¡œ ë‚˜ëˆ„ê³ , ì´ë“¤ì„ ì‚¬ìŠ¬(chain) ì²˜ëŸ¼ ì—°ê²°í•´ ì§‘í•© ì•ˆì—ì„œ ì—°ì‡„ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” í–‰ë™ íŒ¨í„´ì´ë‹¤.

**ì²˜ë¦¬ê°ì²´**ëŠ” **í•¸ë“¤ëŸ¬**ë¼ê³  ë¶€ë¥´ëŠ”ë° ìš”ì²­ì„ ë°›ìœ¼ë©´ ê° í•¸ë“¤ëŸ¬ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€, ì—†ìœ¼ë©´ ì²´ì¸ì˜ ë‹¤ìŒ í•¸ë“¤ëŸ¬ë¡œ ì²˜ë¦¬ì— ëŒ€í•œ ì±…ì„ì„ ì „ê°€í•œë‹¤.

<img width="566" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-02-26 á„‹á…©á„’á…® 7 44 40" src="https://github.com/NaKyongRyul/BaekjoonHub/assets/67616146/097d7289-8823-4d76-b4a0-43480b148352">

### ğŸ§ ì´í•´ë¥¼ ë•ê¸° ìœ„í•œ ì˜ˆì‹œ

ìë™ì‘ë‹µê¸° -> ìƒë‹´ì‚¬ -> ì—”ì§€ë‹ˆì–´


### ğŸ§‘ğŸ»â€ğŸ’» êµ¬í˜„ ì½”ë“œ

<img width="663" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-02-26 á„‹á…©á„’á…® 9 40 28" src="https://github.com/Woori-FISA-CS-Study/CS-Study/assets/67616146/a63733a3-a732-47c7-9687-304ad9a9bba2">


```java
// êµ¬ì²´ì ì¸ í•¸ë“¤ëŸ¬ë¥¼ ë¬¶ëŠ” ì¸í„°í˜ì´ìŠ¤ (ì¶”ìƒ í´ë˜ìŠ¤)
abstract class Handler {
    // ë‹¤ìŒ ì²´ì¸ìœ¼ë¡œ ì—°ê²°ë  í•¸ë“¤ëŸ¬
    protected Handler nextHandler = null;

    // ìƒì„±ìë¥¼ í†µí•´ ì—°ê²°ì‹œí‚¬ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡
    public Handler setNext(Handler handler) {
        this.nextHandler = handler;
        return handler; // ë©”ì„œë“œ ì²´ì´ë‹ êµ¬ì„±ì„ ìœ„í•´ ì¸ìë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í•¨
    }

    // ìì‹ í•¸ë“¤ëŸ¬ì—ì„œ êµ¬ì²´í™” í•˜ëŠ” ì¶”ìƒ ë©”ì„œë“œ
    protected abstract void process(String url);

    // í•¸ë“¤ëŸ¬ê°€ ìš”ì²­ì— ëŒ€í•´ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œ 
    public void run(String url) {
        process(url);

        // ë§Œì¼ í•¸ë“¤ëŸ¬ê°€ ì—°ê²°ëœê²Œ ìˆë‹¤ë©´ ë‹¤ìŒ í•¸ë“¤ëŸ¬ë¡œ ì±…ì„ì„ ë– ë„˜ê¸´ë‹¤
        if (nextHandler != null)
            nextHandler.run(url);
    }
}
```

```java
class ProtocolHandler extends Handler {
    @Override
    protected void process(String url) {
        int index = url.indexOf("://");
        if (index != -1) {
            System.out.println("PROTOCOL : " + url.substring(0, index));
        } else {
            System.out.println("NO PROTOCOL");
        }
    }
}

class DomianHandler extends Handler {
    @Override
    protected void process(String url) {
        int startIndex = url.indexOf("://");
        int lastIndex = url.lastIndexOf(":");

        System.out.print("DOMAIN : ");
        if (startIndex == -1) {
            if (lastIndex == -1) {
                System.out.println(url);
            } else {
                System.out.println(url.substring(0, lastIndex));
            }
        } else if (startIndex != lastIndex) {
            System.out.println(url.substring(startIndex + 3, lastIndex));
        } else {
            System.out.println(url.substring(startIndex + 3));
        }
    }
}

class PortHandler extends Handler {
    @Override
    protected void process(String url) {
        int index = url.lastIndexOf(":");
        if (index != -1) {
            String strPort = url.substring(index + 1);
            try {
                int port = Integer.parseInt((strPort));
                System.out.println("PORT : " + port);
            } catch (NumberFormatException e) {
                e.printStackTrace();
            }
        }
    }
}
```

```java
class Client {
    public static void main(String[] args) {
        // 1. í•¸ë“¤ëŸ¬ ìƒì„±
        Handler handler1 = new ProtocolHandler();
        Handler handler2 = new DomianHandler();
        Handler handler3 = new PortHandler();

        // 2. í•¸ë“¤ëŸ¬ ì—°ê²° ì„¤ì • (handler1 â†’ handler2 â†’ handler3)
        handler1.setNext(handler2).setNext(handler3);

        // 3. ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ ì—°ì‡„ ì‹¤í–‰
        String url1 = "http://www.youtube.com:80";
        System.out.println("INPUT: " + url1);
        handler1.run(url1);

        System.out.println();

        String url2 = "https://www.inpa.tistory.com:443";
        System.out.println("INPUT: " + url2);
        handler1.run(url2);

        System.out.println();

        String url3 = "http://localhost:8080";
        System.out.println("INPUT: " + url3);
        handler1.run(url3);
    }
}
```

## ğŸ¤— ì¥ì 

- ìš”ì²­ì˜ í˜¸ì¶œìì™€ ìˆ˜ì‹ ìë¥¼ ë¶„ë¦¬ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
  
- ìš”ì²­ì˜ ì²˜ë¦¬ ìˆœì„œë¥¼ ì œì–´í•  ìˆ˜ ìˆë‹¤.
  
- ê°ê°ì˜ ì²´ì¸ì€ ìì‹ ì´ í•´ì•¼ í•˜ëŠ” ì¼ë§Œ í•˜ê¸° ë•Œë¬¸ì— ìƒˆë¡œìš´ ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ê°ì²´ ìƒì„±ì´ í¸ë¦¬í•˜ë‹¤.
  

### ğŸ˜­ ë‹¨ì 

- ì‹¤í–‰ ì‹œì— ì½”ë“œì˜ íë¦„ì´ ë§ì•„ì ¸ì„œ ê³¼ì •ì„ ì‚´í´ë³´ê±°ë‚˜ ë””ë²„ê¹… ë° í…ŒìŠ¤íŠ¸ê°€ ì–´ë µë‹¤.
  
- ì¶©ë¶„í•œ ë””ë²„ê¹…ì„ ê±°ì¹˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ë¬´í•œ ì‚¬ì´í´ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
  

## ğŸ¤– ì ìš© ì‹œê¸°

- í”„ë¡œê·¸ë¨ì´ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ìš”ì²­ë“¤ì„ ì²˜ë¦¬í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ì§€ë§Œ ì •í™•í•œ ìš”ì²­ ìœ í˜•ë“¤ê³¼ ìˆœì„œë“¤ì„ ë¯¸ë¦¬ ì•Œ ìˆ˜ ì—†ì„ ë•Œ
  
- ì´ íŒ¨í„´ì€ íŠ¹ì • ìˆœì„œë¡œ ì—¬ëŸ¬ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•´ì•¼ í•  ë•Œ
  

## ğŸ¥¸ ì ìš© ì˜ˆì‹œ

1. Javaì˜ doFilter()
  
  - ì‚¬ìš©ìê°€ ìš”ì²­ì‹œ ì„œë¸”ë¦¿ì— ì ‘ê·¼í•˜ê¸° ì „ì— ë‹¤ì–‘í•œ í•„í„°ë¥¼ ê±°ì¹˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ ì•„ë˜ì™€ ê°™ì€ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìˆê³ , "/hello"ë¡œ ìš”ì²­ì„ ë°›ìœ¼ë©´ í•„í„°ë¥¼ íƒ€ë„ë¡í•œë‹¤.

```java
@ServletComponentScan
@RestController
public class HelloController {
    @GetMapping("/hello")
    public String hello() {
        return "hello";
    }
}
```

```java
@WebFilter(urlPatterns = "/hello") // íŠ¹ì • url ì„œë¸”ë¦¿ì— ì ‘ê·¼í• ì‹œ ë‹¤ìŒ í•„í„°ë¥¼ ì ìš©
public class MyFilter implements Filter {
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        System.out.println("ê²Œì„ ì°¸ì—¬");
        chain.doFilter(request, response);
        System.out.println("ê²Œì„ ë");
    }
}
```

2. Spring Frameworkì˜ Spring Security

```java
@Configuration
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    // ì²´ì¸ í•„í„°ë¥¼ ì„¤ì •í•˜ëŠ” ì½”ë“œ
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // ëª¨ë“  í˜ì´ì§€ì˜ ì ‘ê·¼ê¶Œí•œì„ ì¸ì¦ì—†ì´ í—ˆê°€
        http.authorizeRequests().anyRequest().permitAll().and().addFilter(new MyFilter());
    }
}
```
